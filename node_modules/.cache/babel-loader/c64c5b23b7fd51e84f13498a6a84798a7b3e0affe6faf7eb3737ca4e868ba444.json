{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Hp\\\\ai-video-tutor\\\\frontend\\\\src\\\\VideoTutor.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useEffect } from \"react\";\n\n/**\r\n * VideoTutor: plays a looping tutor.mp4 (in public/) and shows a mouth overlay\r\n * that opens/closes based on audio amplitude when audioUrl is playing.\r\n *\r\n * Props:\r\n *  - audioUrl: a URL to the audio being played (Audio element is created elsewhere).\r\n */\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function VideoTutor({\n  audioUrl,\n  width = 360\n}) {\n  _s();\n  const mouthRef = useRef(null);\n  const audioRef = useRef(null);\n  const rafRef = useRef(null);\n  useEffect(() => {\n    if (!audioUrl || !mouthRef.current) return;\n\n    // create audio element\n    const audio = new Audio(audioUrl);\n    audio.crossOrigin = \"anonymous\";\n    audioRef.current = audio;\n\n    // setup WebAudio analyser\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\n    const ctx = new AudioContext();\n    const src = ctx.createMediaElementSource(audio);\n    const analyser = ctx.createAnalyser();\n    analyser.fftSize = 256;\n    src.connect(analyser);\n    analyser.connect(ctx.destination);\n    const data = new Uint8Array(analyser.frequencyBinCount);\n    const mouth = mouthRef.current;\n    function animate() {\n      analyser.getByteFrequencyData(data);\n      let sum = 0;\n      for (let i = 0; i < data.length; i++) sum += data[i];\n      const avg = sum / data.length;\n\n      // thresholding for mouth open/close\n      const scale = Math.min(1.1, Math.max(0.3, avg / 50));\n      mouth.style.transform = `scaleY(${scale})`;\n      rafRef.current = requestAnimationFrame(animate);\n    }\n\n    // Play audio and animate\n    // resume audio context on user gesture\n    const resumeAndPlay = async () => {\n      if (ctx.state === \"suspended\") {\n        try {\n          await ctx.resume();\n        } catch (e) {}\n      }\n      audio.play().catch(() => {});\n      animate();\n    };\n    resumeAndPlay();\n\n    // cleanup\n    return () => {\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\n      try {\n        audio.pause();\n        audio.currentTime = 0;\n      } catch (e) {}\n      try {\n        ctx.close();\n      } catch (e) {}\n    };\n  }, [audioUrl]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      position: \"relative\",\n      width: width\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"video\", {\n      src: \"/tutor.mp4\",\n      width: width,\n      autoPlay: true,\n      loop: true,\n      muted: true,\n      playsInline: true,\n      style: {\n        borderRadius: 8,\n        display: \"block\"\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: mouthRef,\n      style: {\n        position: \"absolute\",\n        // tweak these to position mouth at correct place on your video\n        left: \"50%\",\n        top: \"58%\",\n        transform: \"translateX(-50%) scaleY(0.3)\",\n        width: Math.round(width * 0.18) + \"px\",\n        height: Math.round(width * 0.06) + \"px\",\n        background: \"#111\",\n        borderRadius: \"50% / 50%\",\n        transition: \"transform 0.08s linear\",\n        pointerEvents: \"none\",\n        opacity: 0.95\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 68,\n    columnNumber: 5\n  }, this);\n}\n_s(VideoTutor, \"H5QRuUdXCOwxIBgNghzH4sBtuDE=\");\n_c = VideoTutor;\nvar _c;\n$RefreshReg$(_c, \"VideoTutor\");","map":{"version":3,"names":["React","useRef","useEffect","jsxDEV","_jsxDEV","VideoTutor","audioUrl","width","_s","mouthRef","audioRef","rafRef","current","audio","Audio","crossOrigin","AudioContext","window","webkitAudioContext","ctx","src","createMediaElementSource","analyser","createAnalyser","fftSize","connect","destination","data","Uint8Array","frequencyBinCount","mouth","animate","getByteFrequencyData","sum","i","length","avg","scale","Math","min","max","style","transform","requestAnimationFrame","resumeAndPlay","state","resume","e","play","catch","cancelAnimationFrame","pause","currentTime","close","position","children","autoPlay","loop","muted","playsInline","borderRadius","display","fileName","_jsxFileName","lineNumber","columnNumber","ref","left","top","round","height","background","transition","pointerEvents","opacity","_c","$RefreshReg$"],"sources":["C:/Users/Hp/ai-video-tutor/frontend/src/VideoTutor.js"],"sourcesContent":["import React, { useRef, useEffect } from \"react\";\r\n\r\n/**\r\n * VideoTutor: plays a looping tutor.mp4 (in public/) and shows a mouth overlay\r\n * that opens/closes based on audio amplitude when audioUrl is playing.\r\n *\r\n * Props:\r\n *  - audioUrl: a URL to the audio being played (Audio element is created elsewhere).\r\n */\r\nexport default function VideoTutor({ audioUrl, width = 360 }) {\r\n  const mouthRef = useRef(null);\r\n  const audioRef = useRef(null);\r\n  const rafRef = useRef(null);\r\n\r\n  useEffect(() => {\r\n    if (!audioUrl || !mouthRef.current) return;\r\n\r\n    // create audio element\r\n    const audio = new Audio(audioUrl);\r\n    audio.crossOrigin = \"anonymous\";\r\n    audioRef.current = audio;\r\n\r\n    // setup WebAudio analyser\r\n    const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n    const ctx = new AudioContext();\r\n    const src = ctx.createMediaElementSource(audio);\r\n    const analyser = ctx.createAnalyser();\r\n    analyser.fftSize = 256;\r\n    src.connect(analyser);\r\n    analyser.connect(ctx.destination);\r\n\r\n    const data = new Uint8Array(analyser.frequencyBinCount);\r\n    const mouth = mouthRef.current;\r\n\r\n    function animate() {\r\n      analyser.getByteFrequencyData(data);\r\n      let sum = 0;\r\n      for (let i = 0; i < data.length; i++) sum += data[i];\r\n      const avg = sum / data.length;\r\n\r\n      // thresholding for mouth open/close\r\n      const scale = Math.min(1.1, Math.max(0.3, (avg / 50)));\r\n      mouth.style.transform = `scaleY(${scale})`;\r\n      rafRef.current = requestAnimationFrame(animate);\r\n    }\r\n\r\n    // Play audio and animate\r\n    // resume audio context on user gesture\r\n    const resumeAndPlay = async () => {\r\n      if (ctx.state === \"suspended\") {\r\n        try { await ctx.resume(); } catch (e) {}\r\n      }\r\n      audio.play().catch(() => {});\r\n      animate();\r\n    };\r\n\r\n    resumeAndPlay();\r\n\r\n    // cleanup\r\n    return () => {\r\n      if (rafRef.current) cancelAnimationFrame(rafRef.current);\r\n      try { audio.pause(); audio.currentTime = 0; } catch (e) {}\r\n      try { ctx.close(); } catch (e) {}\r\n    };\r\n  }, [audioUrl]);\r\n\r\n  return (\r\n    <div style={{ position: \"relative\", width: width }}>\r\n      <video\r\n        src=\"/tutor.mp4\"\r\n        width={width}\r\n        autoPlay\r\n        loop\r\n        muted\r\n        playsInline\r\n        style={{ borderRadius: 8, display: \"block\" }}\r\n      />\r\n      {/* simple mouth overlay - position may need tuning based on your video */}\r\n      <div\r\n        ref={mouthRef}\r\n        style={{\r\n          position: \"absolute\",\r\n          // tweak these to position mouth at correct place on your video\r\n          left: \"50%\",\r\n          top: \"58%\",\r\n          transform: \"translateX(-50%) scaleY(0.3)\",\r\n          width: Math.round(width * 0.18) + \"px\",\r\n          height: Math.round(width * 0.06) + \"px\",\r\n          background: \"#111\",\r\n          borderRadius: \"50% / 50%\",\r\n          transition: \"transform 0.08s linear\",\r\n          pointerEvents: \"none\",\r\n          opacity: 0.95,\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}